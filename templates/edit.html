<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>S·ª≠a s·∫£n ph·∫©m - Truy xu·∫•t Ngu·ªìn g·ªëc</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <nav class="navbar">
        <div class="navbar-content">
            <a href="{{ url_for('main.index') }}" class="navbar-brand">üå± Truy xu·∫•t Ngu·ªìn g·ªëc</a>
            <div class="navbar-actions">
                {% if user %}
                    <span style="color: var(--primary-color); font-weight: 600;">üë§ {{ user.full_name }}</span>
                    <a href="{{ url_for('products.manage') }}" class="btn btn-secondary btn-small">Qu·∫£n l√Ω</a>
                    <a href="{{ url_for('auth.logout') }}" class="btn btn-secondary btn-small">ƒêƒÉng xu·∫•t</a>
                {% endif %}
            </div>
        </div>
    </nav>
    
    <div class="container">
        <header>
            <h1>‚úèÔ∏è S·ª≠a s·∫£n ph·∫©m</h1>
            <p class="subtitle">C·∫≠p nh·∫≠t th√¥ng tin s·∫£n ph·∫©m</p>
        </header>
        
        <main>
            {% if error %}
                <div class="error-message">{{ error }}</div>
            {% endif %}
            
            {% if product %}
            <form method="POST" enctype="multipart/form-data" class="product-form">
                <div class="form-section">
                    <h3>üìã Th√¥ng tin c∆° b·∫£n</h3>
                    
                    <div class="form-group">
                        <label for="product_name">T√™n s·∫£n ph·∫©m: *</label>
                        <input type="text" id="product_name" name="product_name" value="{{ product.product_name }}" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="plant_type">Lo·∫°i c√¢y tr·ªìng:</label>
                        <select id="plant_type" name="plant_type">
                            <option value="seasonal" {{ 'selected' if product.plant_type == 'seasonal' else '' }}>C√¢y th·ªùi v·ª•</option>
                            <option value="perennial" {{ 'selected' if product.plant_type == 'perennial' else '' }}>C√¢y l√¢u nƒÉm</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="production_area">Khu v·ª±c s·∫£n xu·∫•t:</label>
                        <input type="text" id="production_area" name="production_area" value="{{ product.production_area or '' }}">
                    </div>
                </div>
                
                <div class="form-section">
                    <h3>üìÖ Th·ªùi gian</h3>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="planting_date">Ng√†y gieo tr·ªìng:</label>
                            <input type="date" id="planting_date" name="planting_date" value="{{ product.planting_date or '' }}">
                        </div>
                        
                        <div class="form-group">
                            <label for="harvest_date">Ng√†y thu ho·∫°ch:</label>
                            <input type="date" id="harvest_date" name="harvest_date" value="{{ product.harvest_date or '' }}">
                        </div>
                    </div>
                </div>
                
                <div class="form-section">
                    <h3>üîÑ Quy tr√¨nh</h3>
                    
                    <div class="form-group">
                        <label for="production_process">Quy tr√¨nh s·∫£n xu·∫•t:</label>
                        <textarea id="production_process" name="production_process" rows="4">{{ product.production_process or '' }}</textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="harvest_process">Quy tr√¨nh thu ho·∫°ch:</label>
                        <textarea id="harvest_process" name="harvest_process" rows="4">{{ product.harvest_process or '' }}</textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="storage_method">Ph∆∞∆°ng ph√°p b·∫£o qu·∫£n:</label>
                        <textarea id="storage_method" name="storage_method" rows="3">{{ product.storage_method or '' }}</textarea>
                    </div>
                </div>
                
                <div class="form-section">
                    <h3>üì∏ Th√™m h√¨nh ·∫£nh/Video m·ªõi</h3>
                    
                    <div class="form-group">
                        <label for="production_files">Media qu√° tr√¨nh s·∫£n xu·∫•t:</label>
                        <input type="file" id="production_files" name="production_files" multiple accept="image/*,video/*">
                        <small>Th√™m file m·ªõi (file c≈© s·∫Ω ƒë∆∞·ª£c gi·ªØ l·∫°i)</small>
                    </div>
                    
                    <div class="form-group">
                        <label for="harvest_files">Media qu√° tr√¨nh thu ho·∫°ch:</label>
                        <input type="file" id="harvest_files" name="harvest_files" multiple accept="image/*,video/*">
                        <small>Th√™m file m·ªõi (file c≈© s·∫Ω ƒë∆∞·ª£c gi·ªØ l·∫°i)</small>
                    </div>
                </div>
                
                <div class="form-actions">
                    <button type="submit" class="btn btn-primary btn-large">‚úÖ C·∫≠p nh·∫≠t</button>
                    <a href="{{ url_for('products.view_product', product_id=product.id) }}" class="btn btn-secondary">‚ùå H·ªßy</a>
                </div>
            </form>
            {% endif %}
        </main>
    </div>
</body>
</html>